---
layout: phase2-fr
title: Cloud Computing &amp; Cloud Hosting Services
---
<!DOCTYPE html>
<html devsite="">
<head>
<title>Mobile Articles &amp; Mobile Development Guides — Google Cloud Platform</title>
<meta name="description" content="Read technical articles on mobile solutions with Google Cloud Platform. Mobile specific articles cover application development, mobile backend and mobile gaming.">
<meta name="hide_page_heading" value="true">
<meta name="full_width" value="true">
<meta name="top_category" value="developers">
<meta name="subcategory" value="articles">
<meta name="viewport" content="initial-scale=1, minimum-scale=1, width=device-width">
<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link href="//fonts.googleapis.com/css?family=Open+Sans:400italic,300,400,600,700" rel="stylesheet">
<link href="/css/default.css" rel="stylesheet"><!--[if lt IE 9]>
    <link rel="stylesheet" media="screen" href='/css/cp-ie.css'>
    <![endif]-->
<script src="/js/floodlight.js">
</script>
</head>
<body>
<div id="maia-main" class="cp-article">
<div class="maia-cols">
<div class="maia-col-9">
<div>
<div style="float:right">
<div class="g-plusone"></div>
</div>
<h1 class="title">Solutions pour mobile sur Google&nbsp;Cloud&nbsp;Platform</h1>
</div>
<h2>Présentation</h2>
<p>Aujourd'hui, plus d'<a href="http://blogs.strategyanalytics.com/WDS/post/2012/10/17/Worldwide-Smartphone-Population-Tops-1-Billion-in-Q3-2012.aspx">un milliard de personnes utilisent quotidiennement des smartphones</a> et des tablettes, ce qui ouvre des perspectives très intéressantes au niveau des solutions pour mobile. Les utilisateurs ont le choix parmi des centaines de milliers d'applications. Aussi, pour se démarquer de la concurrence, les développeurs doivent-ils proposer des solutions à la fois fonctionnelles et élégantes. Pour ce faire, il convient généralement d'utiliser des services ou des composants de backend pour fournir des données appropriées à l'application, diffuser des notifications push, permettre des interactions entre les utilisateurs, etc.</p>
<p>Google&nbsp;Cloud&nbsp;Platform vous permet de créer aisément un backend pour votre solution pour mobile. Vous avez créé une structure de petite taille et vous espérez attirer un grand nombre de visiteurs&nbsp;? Vous disposez déjà d'une vaste base de clients et vous souhaitez proposer une nouvelle expérience mobile à vos visiteurs&nbsp;? Dans les deux cas, vous pouvez développer un backend capable d'évoluer en fonction de la demande. En tirant parti de l'infrastructure de Google, vous pouvez vous concentrer sur la mise en œuvre de vos scénarios d'application, sans vous soucier de facteurs tels que la gestion de machines ou l’équilibrage de charges.</p>
<h3>Conditions requises</h3>
<p>Les conditions requises pour créer une solution pour mobile attrayante sont les suivantes&nbsp;:</p>
<ul>
<li>Compatibilité avec les appareils Android et iOS par le biais d'applications natives</li>
<li>Stockage, récupération et traitement des données en dehors des appareils mobiles</li>
<li>Organisation de la notification push sur les appareils Android et iOS</li>
<li>Reconnaissance de la géolocalisation et recherche par proximité géographique</li>
<li>Authentification des utilisateurs</li>
<li>Évolutivité élevée</li>
</ul>
<p>Vous pouvez facilement répondre à ces conditions en créant votre solution pour mobile sur Google&nbsp;Cloud&nbsp;Platform.</p>
<h3>Champ d'application</h3>
<p>Cet article présente les principaux composants d'une solution pour mobile développée sur Google&nbsp;Cloud&nbsp;Platform. Il contient à la fois les composants qui sont communs à la plupart des solutions pour mobile et les composants facultatifs qui peuvent se révéler utiles dans des contextes bien précis.</p>
<p>Cet article s'adresse aux architectes et développeurs désireux de créer leur propre backend, et de concevoir les communications entre les clients mobiles et le backend. La création des clients mobiles n'est pas traitée dans cet article. Vous y trouverez simplement les informations relatives à la communication avec le backend, l'authentification des utilisateurs et la réception de notifications push.</p>
<h3>Aperçu général</h3>
<p>Les principaux composants de l'architecture proposée pour cette solution sont les suivants&nbsp;:</p>
<ul>
<li>Vos clients mobiles&nbsp;: toute combinaison de clients Android, iOS et HTML/JavaScript.</li>
<li>Votre application de backend mobile en charge du traitement des demandes en provenance des clients.</li>
<li>La couche de communication entre les clients mobiles et le backend.</li>
<li>Divers services cloud pour le stockage de vos données d'application, la diffusion de notifications push, etc.</li>
</ul>
<p>Ce document passe en revue les diverses étapes à suivre pour élaborer une solution pour mobile. Cette procédure débouche sur la création d'un <a href="#architecture-diagram">schéma d'architecture complet</a>, présenté à la fin de cet article.</p>
<h2>Votre backend mobile<sup>[<a href="#fn-1" name="ref-1" id="ref-1">1</a>]</sup> dans le cloud</h2>
<p>Le développement de votre propre backend vous offre la possibilité d'exécuter votre code personnalisé sur le backend. Vous pouvez donc appeler d'autres services que des services tiers à partir de vos applications clientes mobiles.</p>
<p>L'utilisation de Google&nbsp;Cloud&nbsp;Platform vous permet de bénéficier facilement de votre propre backend dans le cloud. Google&nbsp;App&nbsp;Engine constitue la plate-forme idéale pour exécuter votre code, notamment celui qu'il est possible d'appeler à partir de vos applications clientes mobiles.</p>
<h3>Rôle principal de votre code personnalisé dans le backend</h3>
<p>La méthode de création du backend, telle qu'elle est exposée dans cet article, vous permet de vous concentrer sur le développement de vos scénarios de base. Les deux tâches principales consistent à définir les ressources spécifiques à votre domaine et à mettre en œuvre la logique personnalisée nécessaire pour exécuter des opérations bien précises sur ces ressources. Vos clients mobiles auront la possibilité d'accéder aisément à ces ressources et d'appeler ces opérations par le biais de votre API, laquelle peut être présentée facilement à partir de votre backend mobile, comme il est décrit ci-après.</p>
<p>Il se peut que votre backend mobile récupère certaines ressources des services externes sans les stocker dans votre application. Cependant, il subsistera généralement quelques ressources gérées dans votre solution mobile.</p>
<p>Par exemple, si vous créez une application qui inclut des avis, vous pouvez définir "Avis" comme étant l'une de vos ressources. Si votre application autorise les achats sur mobile, vous pouvez inclure des avis de produits dans l'inventaire. Si votre application répertorie des films, vous pouvez inclure des critiques. Si vous développez un jeu, vous pouvez définir CompletedPlay comme entité avec des attributs tels que le score, la date, l'ID utilisateur, etc.</p>
<p>Vous pourrez ensuite définir des opérations sur ces ressources, comme insérer un nouvel avis, ajouter une note d'appréciation de l'utilité à un avis, extraire des avis en les classant selon leur taux d'utilité, récupérer les meilleurs scores du jour, etc.</p>
<p>En fonction du scénario choisi et de vos besoins, la mise en œuvre de ces opérations et du code personnalisé peut revêtir une certaine importance. Votre code peut également être affecté à d'autres tâches que le simple traitement des demandes API en provenance des clients. Vous pouvez exécuter un traitement en arrière-plan, effectuer des recherches sur la base de la proximité géographique ou envoyer des notifications push, tout en exécutant votre backend mobile sur Google&nbsp;Cloud&nbsp;Platform. Au final, vous pourrez donc vous consacrer pleinement à l'écriture du code spécifique à votre application et non au code d'infrastructure.</p>
<h3>Adieu les soucis&nbsp;!</h3>
<p>Lorsque vous exécutez le code de votre backend mobile sur Google&nbsp;App&nbsp;Engine conformément à la conception recommandée, vous bénéficiez des avantages suivants de l'infrastructure&nbsp;Google&nbsp;:</p>
<ul>
<li><a href="https://developers.google.com/appengine/whyappengine#scale">Évolutivité automatique</a></li>
<li><a href="https://developers.google.com/appengine/docs/whatisgoogleappengine?hl=en">Équilibrage automatique des charges sur les instances de votre backend mobile</a></li>
<li><a href="https://developers.google.com/appengine/docs/java/config/appconfig#Static_Files_and_Resource_Files">Diffusion et mise en cache de contenu statique</a></li>
<li><a href="https://developers.google.com/appengine/whyappengine#reliable">Fonctionnalités de sécurité, de performances et de fiabilité</a></li>
<li><a href="https://developers.google.com/appengine/docs/adminconsole/index">Contrôle et gestion</a></li>
<li><a href="https://developers.google.com/appengine/docs/java/config/dos?hl=en">Protection DoS configurable</a></li>
<li>Intégration dans les comptes Google pour l'authentification OAuth2 (pour les clients Android et iOS)</li>
</ul>
<h2>Communication entre les clients mobiles et le backend mobile</h2>
<p>De nombreux schémas de communication peuvent être mis en place entre les clients mobiles et le backend. Cependant, le modèle basé sur l'architecture REST s'est imposé au cours de la dernière décennie.</p>
<p><a href="https://developers.google.com/appengine/docs/java/endpoints/overview">Google&nbsp;Cloud&nbsp;Endpoints</a><sup>[<a href="#fn-2" name="ref-2" id="ref-2">2</a>]</sup> est une nouvelle technologie intégrée dans Google&nbsp;Cloud&nbsp;Platform qui vous facilite la tâche. Particulièrement puissante, cette technologie affiche non seulement l'API&nbsp;REST provenant de votre backend mobile, mais elle utilise aussi les API&nbsp;REST issues des clients Android, iOS et JavaScript. Elle vous permet également de disposer d'une authentification basée sur OAuth2, de telle sorte que le code de votre backend mobile puisse connaître l'identité de l'appelant. Les services Cloud&nbsp;Endpoints tirent parti de l'infrastructure Google, ce qui constitue une garantie d'évolutivité en fonction de la demande. Vous pouvez également utiliser la compatibilité avec les outils pour faire en sorte que le code de texte standard nécessaire soit généré automatiquement. De cette manière, vous pouvez vous consacrer à la rédaction du code spécifique à vos scénarios d'application.</p>
<p>Consultez la documentation de Google&nbsp;Cloud&nbsp;Endpoints pour en savoir plus sur les opérations suivantes&nbsp;: annoter votre code d'application de sorte que votre API soit affichée via ce service, configurer l'authentification OAuth2, générer des clients Android et iOS à typage fort, ainsi que des clients Java légers. Si vous utilisez Eclipse, vous pouvez bénéficier de la compatibilité intégrée avec d'autres outils fournie par le <a href="https://developers.google.com/eclipse/">Plug-in Google pour Eclipse</a>.</p>
<p>Il est tout à fait possible de créer votre backend mobile sans utiliser Google&nbsp;Cloud&nbsp;Endpoints&nbsp;; de nombreuses parties de cet article restent néanmoins applicables. Cependant, nous partons du principe que ce service est utilisé dans la solution proposée.</p>
<h2>Assemblage de votre solution pour mobile</h2>
<h3>Principes de base</h3>
<p>Comme indiqué dans les sections précédentes, les composants essentiels (Figure&nbsp;1) de l'architecture de la solution pour mobile sont les suivants&nbsp;:</p>
<ol>
<li>Clients mobiles Android et/ou iOS.</li>
<li>Google&nbsp;Cloud&nbsp;Endpoints pour les communications entre les clients et le backend, sur une API&nbsp;REST avec authentification OAuth2 en option.</li>
<li>Le code de votre application backend mobile exécuté sur Google&nbsp;App&nbsp;Engine et par lequel sont traitées les demandes des clients.</li>
</ol>
<figure><img src="/images/articles/mobile-app-1.jpg" alt="Composants essentiels" class="f-80">
<figcaption>Figure&nbsp;1&nbsp;: Composants essentiels de l'architecture proposée pour les solutions pour mobile</figcaption>
</figure>
<h3>Stockage de données</h3>
<p>Dans le cas d'une solution pour mobile avec backend, il convient généralement de stocker les données en dehors des appareils clients<sup>[<a href="#fn-3" name="ref-3" id="ref-3">3</a>]</sup>. Ces données peuvent êtres classées dans deux groupes (Figure&nbsp;2)&nbsp;:</p>
<ol>
<li><strong>Objets de grande taille, et généralement binaires, tels que des images</strong>
<p>Ces objets peuvent faire partie de votre solution. Il peut s'agir, par exemple, d'images de produits pour un inventaire dynamique de cadeaux offerts par votre application mobile. Il se peut également que vous souhaitiez autoriser vos utilisateurs à importer les photos, avatars et autres images. Dans les deux cas, vous pouvez utiliser <a href="https://developers.google.com/storage/docs/getting-started">Google&nbsp;Cloud&nbsp;Storage</a> pour stocker ce type de données. Ce service permet de stocker des objets et des fichiers dont la taille peut atteindre plusieurs téraoctets. Reportez-vous également à la section "<a href="#serving-and-processing-images">Diffusion et traitement d'images</a>" ci-dessous.</p>
</li>
<li><strong>Propriétés et entités détaillées</strong>
<p>Ces propriétés et entités peuvent inclure des informations sur le dernier niveau terminé d'un jeu pour mobile, des renseignements sur des utilisateurs, l'enregistrement de l'appareil d'un utilisateur pour la notification push, des enregistrements d'achats via l'application ou encore des données du même type spécifiques à l'application.</p>
<p>Les propriétés de ces entités peuvent également inclure une référence (un nom d'objet et éventuellement un nom d'ensemble ou une URL, par exemple) aux objets stockés dans Google&nbsp;Cloud&nbsp;Storage.</p>
<p>Lorsque votre backend mobile est hébergé sur Google&nbsp;App&nbsp;Engine, <a href="https://developers.google.com/appengine/docs/java/datastore/">App&nbsp;Engine&nbsp;Datastore</a> est l'emplacement tout indiqué pour stocker ce type de données. Il met à votre disposition un magasin de données sans schéma NoSQL<sup>[<a href="#fn-4" name="ref-4" id="ref-4">4</a>]</sup>, avec un moteur de requêtes et des transactions atomiques. Ces entités sont généralement mappées sur les ressources présentées sur l'API Google&nbsp;Cloud&nbsp;Endpoints API. Lorsque vous utilisez des <a href="https://developers.google.com/appengine/docs/java/datastore/jpa/overview-dn2#Class_and_Field_Annotations">annotations</a> appropriées, vous pouvez tirer parti du plug-in Google pour Eclipse afin de générer le code schématique relatif aux opérations list/get/insert/update/remove standard à l'aide d'App&nbsp;Engine&nbsp;Datastore.</p>
</li>
</ol>
<figure><img src="/images/articles/mobile-app-2.png" alt="Stockage de données" class="f-60">
<figcaption>Figure&nbsp;2&nbsp;: Stockage de données</figcaption>
</figure>
<h3>Optimisation de l'accès aux données avec Memcache</h3>
<p>Si votre backend reçoit fréquemment des demandes de clients mobiles portant sur les mêmes données, récupérer ces données à partir d'un espace de stockage persistant pour chaque demande ne constitue probablement pas la méthode idéale. Si vous développez, par exemple, une application mobile qui diffuse des critiques de films, il est probable que la plupart des visiteurs souhaitent récupérer des critiques sur l'un des films actuellement à l'affiche. Le nombre de demandes sera sensiblement moins élevé pour les critiques des milliers de films que le backend stocke dans un espace de stockage persistant.</p>
<p>Un backend qui exécute Google&nbsp;App&nbsp;Engine peut utiliser un service de cache de données en mémoire distribué appelé <a href="https://developers.google.com/appengine/docs/java/memcache/">Memcache</a> pour stocker et récupérer les données auxquelles les utilisateurs accèdent fréquemment (Figure&nbsp;3). Outre une amélioration des performances et de l'évolutivité de votre solution pour mobile, ce service permet de réduire les coûts d'accès à App&nbsp;Engine&nbsp;Datastore, dans la mesure où votre application envoie moins de demandes au magasin de données.</p>
<figure><img src="/images/articles/mobile-app-3.png" alt="Optimisation de l'accès aux données" class="f-60">
<figcaption>Figure&nbsp;3&nbsp;: Optimisation des données avec Memcache</figcaption>
</figure>
<h3>Traitement asynchrone avec les files d'attente de tâches</h3>
<p>Dans certains cas, il n'est pas possible, ou souhaitable, d'effectuer toutes les tâches associées à une demande provenant d'un client mobile avant que la réponse ne soit renvoyée à l'appareil de l'utilisateur. Supposons que vous développiez une application de réseau social qui informe les amis d'un utilisateur lorsque ce dernier arrive dans un restaurant. Dans ce cas, il est préférable d'enregistrer l'événement de check-in de manière synchrone, ainsi que la nécessité de traiter la notification, puis d'envoyer immédiatement l'accusé de réception au client, sans attendre que toutes les notifications soient traitées.</p>
<p>Le code qui s'exécute sur Google&nbsp;App&nbsp;Engine peut utiliser un service baptisé <a href="https://developers.google.com/appengine/docs/java/taskqueue/">Task Queues</a> pour placer en file d'attente les informations relatives aux tâches qui doivent être exécutées de manière asynchrone. Dans l'exemple ci-dessus, il se peut que votre application place une tâche en file d'attente pour informer les amis de Jean que celui-ci est arrivé au restaurant "Le bœuf qui rit" à 19&nbsp;h&nbsp;35.</p>
<p>En règle générale, vous configurez le service "Task Queue" pour qu'il envoie les tâches mises en attente (<a href="https://developers.google.com/appengine/docs/java/taskqueue/overview-push">modèle "push"</a>) à votre code qui s'exécute sur Google&nbsp;App&nbsp;Engine sous la forme de requêtes&nbsp;HTTP adressées à une URL définie. Votre application peut traiter ces requêtes au moyen de gestionnaires de requêtes Web standards. Dans l'exemple ci-dessus, votre gestionnaire de requêtes a pu récupérer les informations de tâche de la requête HTTP, rechercher les amis de Jean, puis informer chacun d'eux en envoyant une notification push. Vous pouvez configurer les tâches pour qu'elles soient traitées par les mêmes instances Google&nbsp;App&nbsp;Engine que celles qui traitent les demandes émises par des clients mobiles ou par des <a href="https://developers.google.com/appengine/docs/java/taskqueue/overview-push#Push_Queues_and_Backends">instances dédiées</a>.</p>
<p>Votre code peut également <a href="https://developers.google.com/appengine/docs/java/taskqueue/overview-pull">extraire les tâches</a> des files d'attente. Cette opération peut être effectuée par votre code de backend mobile qui s'exécute sur Google&nbsp;App&nbsp;Engine ou par le code qui s'exécute en dehors d'App&nbsp;Engine, cette plate-forme pouvant être utilisée pour le traitement des tâches par des instances Google&nbsp;Compute&nbsp;Engine.</p>
<p>Quoi qu'il en soit, le traitement des tâches est généralement la deuxième responsabilité la plus courante de votre code personnalisé exécuté sur Google&nbsp;App&nbsp;Engine, avec le traitement des demandes en provenance des clients mobiles sur Google&nbsp;Cloud&nbsp;Endpoints, comme indiqué dans les sections précédentes.</p>
<figure><img src="/images/articles/mobile-app-4.png" alt="Traitement asynchrone" class="f-60">
<figcaption>Figure&nbsp;4&nbsp;: Traitement asynchrone avec le service "Task&nbsp;Queues"</figcaption>
</figure>
<h3 id="push-notification">Notification push</h3>
<p>La notification push est un facteur très important dans le cadre de l'expérience utilisateur globale perçue sur les appareils mobiles. En fonction de la plate-forme cliente, votre solution pour mobile peut faire appel à cette technologie pour afficher des "<a href="http://developer.android.com/guide/topics/ui/notifiers/toasts.html">toasts</a>" et d'autres notifications sur les appareils des utilisateurs, même si votre application mobile n'est pas en cours d'exécution. Elle peut également être utilisée pour approvisionner l'application cliente mobile en données.</p>
<p>Lorsque votre code de backend mobile s'exécute sur Google&nbsp;App&nbsp;Engine, vous pouvez organiser l'envoi de notifications push aux utilisateurs en tirant parti des technologies suivantes&nbsp;:</p>
<ul>
<li><a href="http://developer.android.com/google/gcm/index.html">Google&nbsp;Cloud&nbsp;Messaging pour Android</a>&nbsp;: ce service Google vous permet d'envoyer des données aux utilisateurs qui ont installé votre application cliente sur leurs appareils Android. Si vous utilisez Eclipse, vous pouvez faire en sorte que le code schématique soit généré par le <a href="https://developers.google.com/eclipse/">plug-in Google pour Eclipse</a>.</li>
<li>API Sockets<sup>[<a href="#fn-5" name="ref-5" id="ref-5">5</a>]</sup> pour envoyer une notification push aux utilisateurs iOS à l'aide d'Apple® Push Notification Service.</li>
</ul>
<p>Il peut, par exemple, s'agir de l'envoi de notifications push aux utilisateurs de votre solution pour mobile lorsque leur ami arrive dans un restaurant ou publie un avis (Figure&nbsp;5).</p>
<figure><img src="/images/articles/mobile-app-5.png" alt="Service de notification push" class="f-80">
<figcaption>Figure&nbsp;5&nbsp;: Notification push</figcaption>
</figure>
<h3 id="serving-static-content">Diffusion de contenu statique</h3>
<p>Dans certains cas, vous pouvez également tirer profit de l'empaquetage de <a href="https://developers.google.com/appengine/docs/java/config/appconfig#Static_Files_and_Resource_Files">contenu statique</a> dans le cadre de votre application Google&nbsp;App&nbsp;Engine, puis faire en sorte qu'il soit diffusé par l'infrastructure Google&nbsp;App&nbsp;Engine à l'aide de mémoire cache et de serveurs dédiés, sans aucune implication du code de votre backend mobile. En règle générale, cela concerne davantage les clients HTML/JavaScript que les applications iOS ou Android natives. De plus, cette méthode est mieux adaptée aux images, aux feuilles de style CSS ou au code JavaScript de navigateur.</p>
<h3 id="serving-and-processing-images">Diffusion et traitement d'images</h3>
<p>Si votre solution pour mobile comprend un nombre raisonnable d'images statiques, vous pouvez les empaqueter (bien souvent dans plusieurs résolutions) dans vos applications Android et iOS natives. Cela s'applique, par exemple, aux différentes icônes qui composent votre application et qui sont utilisées pour créer l'interface utilisateur de vos applications clientes.</p>
<p>Autre catégorie d'images&nbsp;: celles qui ne font pas partie de vos applications, mais qui sont liées aux données traitées par celles-ci, comme les miniatures de films d'une application cinématographique, les photos des produits qui peuvent être offerts via une application, ou encore les avatars d'un jeu ou d'une application de réseau social. Si vous pouvez stocker de telles images dans des résolutions et des formats optimisés pour vos clients mobiles, vous pouvez les importer dans <a href="https://developers.google.com/storage/docs/getting-started">Google&nbsp;Cloud&nbsp;Storage</a>, puis fournir aux clients des URL pointant directement vers ces images. Cette méthode se révèle particulièrement évolutive, en ce sens qu'elle permet aux clients mobiles de récupérer directement ces images depuis l'espace de stockage évolutif dans le cloud sans utiliser le code de votre backend mobile.</p>
<p>Dans certains cas, vous souhaiterez peut-être manipuler et traiter des images, en plus de les stocker. Vous souhaiterez, par exemple, diffuser les images dans des formats adaptés dynamiquement en fonction de la résolution de vos appareils clients. Vous pouvez alors utiliser le <a href="https://developers.google.com/appengine/docs/java/images/">service Images</a> de Google&nbsp;App&nbsp;Engine pour redimensionner, faire pivoter, retourner et recadrer des images, ainsi que pour améliorer des photos à l'aide d'un algorithme prédéfini. Ces opérations peuvent être effectuées sur des images provenant d'autres sources, dont Google&nbsp;Cloud&nbsp;Storage. Une fois modifiées, les images peuvent être distribuées directement aux clients à partir de l'infrastructure de diffusion d'images dynamique fournie par Google, sans que le code de votre backend mobile ne soit utilisé. Le rôle de votre code se limite à l'utilisation de l'API Images&nbsp;Service afin d'obtenir l'URL d'image appropriée et à la transmission de cette URL aux clients mobiles.</p>
<figure><img src="/images/articles/mobile-app-6.png" alt="Diffusion et traitement d'images" class="f-80">
<figcaption>Figure&nbsp;6&nbsp;: Diffusion et traitement d'images</figcaption>
</figure>
<h3>Recherche en texte intégral et par proximité géographique (basée sur la position)</h3>
<p>Si vous souhaitez offrir à vos utilisateurs une fonctionnalité de recherche en texte intégral dans certaines des données structurées gérées par votre solution pour mobile, vous pouvez utiliser l'<a href="https://developers.google.com/appengine/docs/java/search/">API de recherche</a> de Google&nbsp;App&nbsp;Engine<sup>[<a href="#fn-6" class="ref-6">6</a>]</sup>. Par exemple, si votre application permet d'accéder à un inventaire d'éléments à la fois volumineux et dynamique, il peut être utile pour vos utilisateurs de rechercher des éléments en saisissant des mots qui font partie de leur nom ou de leur description, même si vous proposez une interface tactile avec des fonctions de catégorisation, de pagination, etc.</p>
<p>Pour utiliser l'API de recherche, vous pouvez créer des "documents" contenant des données incluses dans l'index de recherche, puis ajouter ces "documents" à un index. Votre backend mobile peut ensuite créer des requêtes de recherche, y compris en texte intégral, et les exécuter sur les "documents" qui figurent dans l'index. Dans l'exemple ci-dessus, chaque élément de l'inventaire peut être mappé sur un "document" de l'index avec des propriétés telles qu'un nom, une description, etc.</p>
<p>Votre solution pour mobile peut également effectuer une recherche par proximité géographique si vous souhaitez, par exemple, récupérer la liste des magasins à proximité. Le développement de cette fonctionnalité étant particulièrement complexe, vous pouvez vous simplifier la tâche en tirant parti de l'API de recherche pour les <a href="https://developers.google.com/appengine/docs/java/search/overview#Performing_Location-Based_Searches">recherches par proximité géographique</a>[<sup><a href="#fn-7" class="ref-7">7</a>]</sup>. La méthode de base est pratiquement identique au processus décrit ci-dessus pour la recherche en texte intégral. Il vous suffit d'ajouter la géolocalisation comme propriété du document, puis d'inclure la condition de proximité géographique dans vos requêtes de recherche.</p>
<figure><img src="/images/articles/mobile-app-7.png" alt="Recherche en texte intégral et par proximité géographique" class="f-60">
<figcaption>Figure&nbsp;7&nbsp;: Recherche en texte intégral et par proximité géographique</figcaption>
</figure>
<h3>Maintenance personnalisée et autres tâches planifiées</h3>
<p>Le code de votre backend mobile traite les demandes en provenance des clients mobiles de manière synchrone via Google&nbsp;Cloud&nbsp;Endpoints et asynchrone via Task&nbsp;Queues. Il arrive qu'il doive, en outre, procéder à un traitement selon des intervalles réguliers ou semi-réguliers. Peut-être souhaitez-vous que votre solution pour mobile envoie, chaque matin, une notification push aux utilisateurs mobiles à propos d'une offre locale ou qu'elle effectue, une ou plusieurs fois par jour, diverses tâches de maintenance spécifiques à l'application. Votre application peut, par exemple, proposer des abonnements Premium. À la fin de la période d'abonnement, ou lorsque la date d'expiration est proche, vous pouvez effectuer diverses tâches de traitement connexes comme, par exemple, envoyer un e-mail à l'aide de l'<a href="https://developers.google.com/appengine/docs/java/mail/">API&nbsp;Mail</a>, désactiver des comptes utilisateur, etc. Vous pouvez également faire en sorte que votre backend mobile mette à jour certaines des données placées dans Memcache toutes les 10&nbsp;minutes ou actualise, toutes les heures, les statistiques des meilleurs joueurs.</p>
<p>Lorsque le code de votre backend mobile s'exécute sur Google&nbsp;App&nbsp;Engine, le <a href="https://developers.google.com/appengine/docs/java/config/cron">service&nbsp;Cron</a> permet de configurer aisément ces tâches planifiées. Vous pouvez le configurer de manière à appeler certaines URL de votre backend mobile à des intervalles définis ou à des heures bien précises.</p>
<figure><img src="/images/articles/mobile-app-8.png" alt="Service Cron" class="f-60">
<figcaption>Figure&nbsp;8&nbsp;: Tâches planifiées avec le service Cron</figcaption>
</figure>
<h3>Stockage et analyse de journaux d'application</h3>
<p>Les journaux d'application peuvent contenir de précieuses informations sur la manière dont les utilisateurs se servent de votre solution et sur le comportement de votre backend mobile. Lorsque le code de votre backend mobile s'exécute sur Google&nbsp;App&nbsp;Engine, vous pouvez utiliser l'<a href="https://developers.google.com/appengine/docs/java/logs/">API&nbsp;Logs</a> pour récupérer les journaux d'application. Vous pouvez ensuite les importer dans Google&nbsp;Cloud&nbsp;Storage et les intégrer dans <a href="https://developers.google.com/bigquery/">Google&nbsp;BigQuery</a>. Si votre application cliente pour mobile permet aux utilisateurs d'effectuer de nombreuses interactions au sein des applications sans envoyer de demandes régulières au backend, vous pouvez enrichir les journaux d'application de fichiers que l'application cliente peut collecter et envoyer régulièrement à votre backend mobile par le biais de l'API présentée sur Google&nbsp;Cloud&nbsp;Endpoints.</p>
<h3 id="running-code">Exécution de code en dehors du bac à sable de Google&nbsp;App&nbsp;Engine</h3>
<p>Si la création de l'intégralité du backend mobile s'avère possible à l'aide d'exécutables compatibles avec Google&nbsp;App&nbsp;Engine<sup>[<a href="#fn-8" name="ref-8" id="ref-8">8</a>]</sup>, vous serez dispensé du traitement des problèmes d'infrastructure que sont notamment le dimensionnement automatique, l'équilibrage des charges, la reprise après incident, etc. Cependant, il se peut que certaines de vos exigences ne soient pas compatibles avec le bac à sable d'App&nbsp;Engine. Vous souhaitez, par exemple, utiliser des bibliothèques C/C++, des binaires personnalisés ou encore des programmes Perl dans le cadre d'un traitement de demandes asynchrone ou d'un traitement par lots.</p>
<p>Dans les deux cas, vous pouvez utiliser <a href="/fr/products/compute-engine">Google&nbsp;Compute&nbsp;Engine</a><sup>[<a href="#fn-9" name="ref-9" id="ref-9">9</a>]</sup> pour exécuter les parties de votre backend mobile qui ne peuvent pas être hébergées sur Google&nbsp;App&nbsp;Engine.</p>
<p>Lorsque le code exécuté sur Compute&nbsp;Engine est utilisé en vue d'un traitement par lots ou d'un traitement de demandes asynchrone<sup>[<a href="#fn-10" name="ref-10" id="ref-10">10</a>]</sup>, celui exécuté sur Google&nbsp;App&nbsp;Engine peut placer des tâches dans une ou plusieurs files d'attente de retrait. Le code exécuté sur Compute&nbsp;Engine pourra alors extraire ces tâches à l'aide de l'<a href="https://developers.google.com/appengine/docs/python/taskqueue/rest/">API&nbsp;REST Task&nbsp;Queue</a><sup>[<a href="#fn-11" name="ref-11" id="ref-11">11</a>]</sup>.</p>
<figure><img src="/images/articles/mobile-app-9.png" alt="Exécution de code en dehors du bac à sable de Google&nbsp;App&nbsp;Engine" class="f-90">
<figcaption>Figure&nbsp;9&nbsp;: Exécution de code en dehors du bac à sable de Google&nbsp;App&nbsp;Engine</figcaption>
</figure>
<h3>Autres API et services associés</h3>
<p>Nous proposons un large éventail d'autres <a href="https://developers.google.com/mobile/">services et API</a> utilisables dans les solutions pour mobile. Il s'agit notamment de <a href="http://www.google.com/ads/admob/">AdMob</a> et <a href="https://developers.google.com/analytics/devguides/">Analytics</a>, de diverses <a href="https://developers.google.com/maps/">API Google&nbsp;Maps</a>, telles que l'<a href="https://developers.google.com/places/">API Google&nbsp;Adresses</a>, ainsi que des kits SDK <a href="https://developers.google.com/maps/documentation/android/">Android Maps</a> et <a href="https://developers.google.com/maps/documentation/ios/">iOS Maps</a>. L'utilisation de ces services et API sort du cadre de cet article.</p>
<h2 id="architecture-diagram">Schéma de l'architecture</h2>
<p>Les différents composants de la solution sont représentés dans l'architecture illustrée ci-dessous (Figure&nbsp;10).</p>
<figure><a href="/images/articles/mobile-app-10.png"><img src="/images/articles/mobile-app-10.png" alt="Schéma de l'architecture" class="f-100"></a>
<figcaption>Figure&nbsp;10&nbsp;: Schéma de l'architecture de la solution pour mobile proposée (<a href="/images/articles/mobile-app-10.png">taille réelle</a>)</figcaption>
</figure>
<h2>Conclusion</h2>
<p>Google&nbsp;Cloud&nbsp;Platform vous permet de créer aisément un backend pour votre solution pour mobile, sans que vous n'ayez à vous occuper des mécanismes sous-jacents et de l'infrastructure. Votre solution peut offrir une évolutivité élevée et répondre aux conditions requises pour créer des applications attrayantes. Elle peut notamment appliquer une authentification intégrée des utilisateurs, accepter des applications Android et iOS natives, stocker, récupérer et traiter des données en dehors des appareils mobiles, ou encore appliquer des notifications push et utiliser la fonction de recherche par proximité géographique.</p>
<h2>Exemple d'application</h2>
<p>Vous pouvez télécharger l'exemple d'application Mobile&nbsp;Shopping&nbsp;Assistant (<a href="https://github.com/GoogleCloudPlatform/solutions-mobile-shopping-assistant-backend-java" target="_blank">backend App&nbsp;Engine</a>, <a href="https://github.com/GoogleCloudPlatform/solutions-mobile-shopping-assistant-android-client" target="_blank">client&nbsp;Android</a> et <a href="https://github.com/GoogleCloudPlatform/solutions-mobile-shopping-assistant-ios-client" target="_blank">client&nbsp;iOS</a>) et lire le <a href="/resources/articles/how-to-build-mobile-app-with-app-engine-backend-tutorial">didacticiel</a> correspondant pour découvrir comment les composants essentiels de l'architecture (présenté dans cet article) ont été mis en œuvre dans ce scénario. L'exemple d'application s'accompagne de l'API&nbsp;REST présentée via Google&nbsp;Cloud&nbsp;Endpoints avec authentification intégrée des clients basée sur le protocole OAuth, recherche par proximité géographique, traitement des demandes asynchrone, tâches planifiées et diffusion d'images à partir de Google&nbsp;Cloud&nbsp;Storage.</p>
<br>
<h2>Remarques</h2>
<p id="fn-1"><sup>[<a href="#ref-1">1</a>]</sup> Dans cet article, le terme "backend" désigne, d'une manière générale, la partie de la solution pour mobile qui s'exécute en dehors des appareils clients, à ne pas confondre avec les <a href="http://developers.google.com/appengine/docs/java/backends/overview?hl=en">instances de backend</a> Google&nbsp;App&nbsp;Engine qui représentent un type d'instances présentant des <a href="http://developers.google.com/appengine/docs/java/backends/overview?hl=en#Properties_of_Backends">caractéristiques différentes</a> des instances App&nbsp;Engine par défaut. Ces instances par défaut s'avèrent suffisantes dans de nombreuses solutions pour mobile. Cependant, si vous présentez des besoins spécifiques, vous pouvez assembler une solution à l'aide d'un "backend" composé d'une combinaison d'instances App&nbsp;Engine par défaut et d'instances de backend.</p>
<p id="fn-2"><sup>[<a href="#ref-2">2</a>]</sup> Depuis le mois de février&nbsp;2013, Google&nbsp;Cloud&nbsp;Endpoints est une fonctionnalité disponible à titre expérimental.</p>
<p id="fn-3"><sup>[<a href="#ref-3">3</a>]</sup> La section&nbsp;4.2 des <a href="https://developers.google.com/appengine/terms">Conditions d'utilisation de Google&nbsp;App&nbsp;Engine</a> décrit votre obligation de protéger la vie privée et les droits de vos utilisateurs finaux. Cela comprend l'obligation de fournir des règles de confidentialité adéquates sur le plan juridique concernant l'utilisation des données collectées et l'obtention de tous les consentements nécessaires auprès des utilisateurs finaux pour ce qui concerne la collecte, l'utilisation, le contrôle ou la divulgation de ces données.</p>
<p id="fn-4"><sup>[<a href="#ref-4">4</a>]</sup> Si vous préférez utiliser une base de données SQL relationnelle, vous pouvez opter pour l'utilisation de <a href="http://developers.google.com/cloud-sql/">Google&nbsp;Cloud&nbsp;SQL</a> <a href="http://developers.google.com/cloud-sql/faq#choice">en remplacement de Datastore ou parallèlement à Datastore</a>.</p>
<p id="fn-5"><sup>[<a href="#ref-5">5</a>]</sup> Depuis le début du mois de janvier&nbsp;2013, la fonctionnalité API&nbsp;Sockets est&nbsp;seulement accessible aux testeurs de confiance. De plus, aucune assistance n'est fournie pour la production.</p>
<p id="fn-6"><sup>[<a href="#ref-6">6</a>]</sup> Depuis le début du mois de janvier&nbsp;2013, l'API de recherche d'App&nbsp;Engine est fournie à titre expérimental avec un <a href="http://developers.google.com/appengine/docs/java/search/overview#Quotas">nombre limité de quotas gratuits</a>.</p>
<p id="fn-7"><sup>[<a href="#ref-7">7</a>]</sup> Depuis le mois de décembre&nbsp;2012, la fonction de recherche par proximité géographique est opérationnelle dans les applications déployées sur App&nbsp;Engine. En revanche, elle ne fonctionne pas sur le serveur de développement local.</p>
<p id="fn-8"><sup>[<a href="#ref-8">8</a>]</sup> Depuis le mois de décembre&nbsp;2012, App&nbsp;Engine <a href="http://developers.google.com/appengine/docs/whatisgoogleappengine">accepte</a> Java&nbsp;5 et 6, Python&nbsp;2.7.3 et 2.5.2, ainsi que l'exécutable Go (ce dernier en tant que fonctionnalité expérimentale).</p>
<p id="fn-9"><sup>[<a href="#ref-9">9</a>]</sup> Depuis le mois de décembre&nbsp;2012, Google&nbsp;Compute&nbsp;Engine est proposé à certains utilisateurs sous la forme d'un aperçu limité.</p>
<p id="fn-10"><sup>[<a href="#ref-10">10</a>]</sup> Google&nbsp;Compute&nbsp;Engine peut également être utilisé dans d'autres scénarios de solutions pour mobile. Cependant, ce type d'utilisation sort du cadre du présent document.</p>
<p id="fn-11"><sup>[<a href="#ref-11">11</a>]</sup> Depuis le mois de décembre&nbsp;2012, l'API&nbsp;REST Task&nbsp;Queue est une fonctionnalité disponible à titre expérimental.</p>
</div>
<div class="maia-col-3"><br>
<img src="//www.google.com/images/icons/product/feedback-16.png" class="g-app-icon" alt=""> <a href="javascript:void(0);" class="google-feedback">Commentaires sur ce document</a><br>
<br>
<img src="//www.google.com/images/icons/thirdparty/pdf-16.png" class="g-app-icon" alt=""> <a href="/files/articles/google-cloud_technical-article_mobile-solutions.pdf" class="cp-pdf" onclick="javascript: _gaq.push(['_trackPageview', '../../../files/articles/google-cloud_technical-article_mobile-solutions.pdf']);">Télécharger la version PDF</a>
<hr>
<h4>Exemple d'application et didacticiel</h4>
<ul>
<li>Exemple d'application Shopping&nbsp;Assistant sur Github<br>
<a href="https://github.com/GoogleCloudPlatform/solutions-mobile-shopping-assistant-backend-java" target="popout">[Backend Java]</a> <a href="https://github.com/GoogleCloudPlatform/solutions-mobile-shopping-assistant-android-client" target="popout">[Client Android]</a> <a href="https://github.com/GoogleCloudPlatform/solutions-mobile-shopping-assistant-ios-client" target="popout">[Client iOS]</a> <img src="/images/ext-link-8px.png" height="8px" width="8px" alt=""></li>
<li><a href="/developers/articles/how-to-build-mobile-app-with-app-engine-backend-tutorial">Didacticiel</a></li>
</ul>
<hr></div>
</div>
</div>
<script>
(function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script><script src="//www.gstatic.com/feedback/api.js">
</script><script>
$('body').delegate('.google-feedback', 'click', function() {
      userfeedback.api.startFeedback({'productId': '94614'});
  });
</script><!-- Scripts to include both on Goro + Devsite --><script>
window.___gcfg = {
     lang: ''
   };
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script><!-- GTM implementation --><!-- Start dataLayer --><script>
dataLayer = [{
        'country': 'fr',
        'region': 'emea',
        'language': 'fr'
      }];
</script><!-- End dataLayer --><!-- Start Google Tag Manager --><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5CVQBG" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> <script>
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5CVQBG');
</script><!-- End Google Tag Manager --><!-- Global JS scripts to load; path will depend on whether we're on devsite or Goro --><script src="/js/base.min.js">
</script><!-- Retina loader; Do not load if partners page because we need to wait until the Angular app runs --><script>
new lfl.system.RetinaLoader();
</script><!-- Secondary right-side scroll-nav --><script>
new lfl.ui.ScrollNav({});
</script>
</body>
</html>